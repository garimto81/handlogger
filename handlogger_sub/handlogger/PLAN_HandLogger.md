# PLAN - Poker Hand Logger

> **불변 비전** | 작업 목록: [PRD](PRD_HandLogger.md) | 현재 상태: [STATUS](STATUS.md)

## 🎯 목표

**포커 대회 방송 프로덕션 데이터 매니저가 대회장을 돌아다니며 대회 전 사전에 정의된 키 플레이어(유명 플레이어, 칩 리더 등)들을 모니터링하고 칩 업데이트를 하며, 키 플레이어들이 플레이하고 있는 테이블의 상태를 모니터링 및 업데이트(플레이어 변경, 칩 업데이트)하고, 키 플레이어가 참여한 핸드를 실시간으로 기록하여 게임 후 즉시 히스토리를 후반 편집팀에 전달할 수 있는 모바일 웹앱**

---

## 👥 페르소나

### 주요 사용자 1: Henry.Lee (현장 데이터 매니저)

- **직업**: 포커 대회 생중계 프로덕션 데이터 매니저 (경력 5년, 프리랜서)
- **역할**: 대회장 현장에서 키 플레이어 핸드 실시간 기록 → HANDS 시트 저장

### 주요 사용자 2: Aiden.Kim (후반 작업자)

- **직업**: 프로덕션 후반 어시스턴트 (경력 3년)
- **역할**: 프로덕션 룸에서 HANDS 시트 모니터링 → 중요 핸드 선별 → VIRTUAL 시트 전송 → 편집팀 공유
- **현재 문제**:
  - **데이터 과부하**: Henry가 기록한 25개 핸드 중 편집용은 빅팟 TOP 10만 필요 → 현재는 전체 받아서 수작업 필터링
  - **편집팀 혼란**: VIRTUAL 시트에 작은 팟 핸드까지 전부 전달 → 편집팀이 "뭐가 중요한 건지 모르겠어요" 불만
  - **큐레이션 누락**: Henry가 현장에서 바빠서 핸드 선별 못함 → Aiden이 대회 종료 후 2시간 동안 엑셀 정리
- **목표**:
  - HANDS 시트 실시간 모니터링 (Henry가 기록 즉시 확인)
  - 빅팟/중요 핸드만 **선별** (TOP 10, 특정 플레이어 ALLIN 등)
  - VIRTUAL 시트에 **선별된 핸드만** 전송 (편집팀 노이즈 제거)
  - Slack 알림으로 편집팀에 즉시 공유
- **하루 일과** (토너먼트 Day 2, 진행 시간 12:00~22:00):
  - **11:45** - 프로덕션 룸 도착, 노트북으로 HandLogger 접속 (Review 모드)
  - **12:00** - 대회 시작, HANDS 시트 모니터링 시작 (새 핸드 자동 로드)
  - **12:21** - Henry가 T15 김프로 핸드 기록 완료 → HANDS 시트에 자동 저장
  - **12:22** - Aiden이 Review 모드에서 새 핸드 확인 → 팟 500k (빅팟!) → "VIRTUAL 전송" 버튼 클릭
  - **12:23** - VIRTUAL 시트 자동 갱신 + Slack 알림 전송 → 편집팀 즉시 확인
  - **15:30** - 휴식 시간, 지금까지 25개 핸드 기록됨 → Aiden이 빅팟 TOP 10만 선별 → VIRTUAL 전송 (10개)
  - **21:50** - Day 2 종료, 오늘 총 62개 핸드 기록 → Aiden이 30개 선별 전송 완료
  - **22:00** - 편집팀 "VIRTUAL 시트에 30개 딱 정리되어 있어서 바로 작업 시작!" → Aiden 퇴근

---

## 📖 시나리오

### 시나리오 1: 대회 시작 전 키 플레이어 등록 (Day 2, 10:30)

**[00:00]** Henry가 대회장 도착, 스마트폰으로 HandLogger 접속
**[00:10]** Type 시트 열기 → 오늘 추적할 키 플레이어 18명 확인 (칩 리더 10명 + 유명 프로 8명)
**[00:30]** 대회 사무국에서 받은 "시작 테이블 배치표" 확인
  - 김프로: T15, S3, 250k 칩
  - 박프로: T42, S7, 310k 칩 (칩 리더 1위)
  - 이프로: T28, S5, 180k 칩
  - ... (18명 전부)
**[02:00]** Type 시트에 18명 수동 입력 (Table No., Seat No., Players, Chips)
**[02:30]** "등록 완료!" → 각 플레이어별 현재 위치 스냅샷 저장됨

**결과**: 2분 30초 만에 18명 키 플레이어 초기 설정 완료

### 시나리오 2: 현장 데이터 매니저 핸드 기록 (12:20, T15 테이블)

**[00:00]** Henry가 김프로(T15, S3) 테이블 옆에 서서 대기 중
**[00:05]** 김프로 빅팟 핸드 시작! → 스마트폰 꺼내서 HandLogger Record 모드 진입
**[00:08]** 테이블 T15 선택 → Type 시트에서 T15 플레이어 9명 자동 로드
**[00:10]** BTN 좌석 7번 확인 후 선택
**[00:15]** Preflop: S8 BET 6k → S9 FOLD → S1 CALL → S2 FOLD → S3(김프로) RAISE 25k → ... → S8 CALL → S1 FOLD
**[00:22]** "Next Street" → Flop: 보드 [As Kh Qd] 터치 선택
**[00:25]** Flop: S8 CHECK → S3(김프로) BET 45k → S8 RAISE 120k → S3 ALLIN 250k → S8 CALL
**[00:28]** Turn [7c], River [2d] 선택 (액션 없음)
**[00:30]** "Commit" 탭 → "저장 완료" → **HANDS/ACTIONS 시트만 저장** (VIRTUAL 전송 안 함)

**결과**: 30초 만에 핵심 핸드 완벽 기록 → HANDS 시트에만 저장 (후반 작업자가 나중에 선별)

### 시나리오 3: 후반 작업자 핸드 선별 및 전송 (12:21, 프로덕션 룸)

**[00:00]** Henry가 T15 핸드 기록 완료 (12:21) → HANDS 시트에 자동 저장

**[00:30]** Aiden이 노트북에서 HandLogger Review 모드 새로고침 → 새 핸드 1개 확인

**[00:40]** 핸드 클릭 → 상세 정보 확인:
- 테이블: T15
- 플레이어: S3(김프로), S8(박세컨드)
- 보드: As Kh Qd 7c 2d
- 팟: 500k (빅팟!)
- 액션: 김프로 ALLIN 250k

**[00:50]** Aiden 판단: "김프로 ALLIN이니까 편집팀 필요!" → **"VIRTUAL 전송" 버튼 클릭**

**[00:52]** 시스템 동작 (v2.5 C열 Time 매칭):
1. 핸드 `started_at` ISO 시간 추출: `2025-10-06T03:20:35Z` (UTC)
2. KST 타임존 변환 및 HH:MM 추출: `12:20` (UTC+9)
3. VIRTUAL 시트 C열 전체 읽기 (행4부터, Date 객체)
4. C열 각 셀을 HH:MM으로 변환하여 `12:20` 매칭
5. 매칭된 행 → E/F/G/H/J 열만 개별 업데이트 (A/B/C/D/I 미사용)

**[00:55]** VIRTUAL 시트 자동 갱신 (해당 행):
- **C열(Time)**: `12:20` (편집팀이 미리 입력한 값, 변경 안 함)
- **E열(상태)**: `미완료`
- **F열(파일명)**: `VT15_Kim.Pro_AsKs_vs_Park.Second_QdQc`
- **G열(등급)**: `A` (모든 VIRTUAL 전송 핸드는 A등급)
- **H열(히스토리)**: `Kim Pro(A♠K♠) vs Park Second(Q♦Q♣)\n보드: A♠ K♥ Q♦ 7♣ 2♦\n팟: 25.0BB (500,000)`
- **J열(자막)**:
  ```
  KIM PRO / KR
  CURRENT STACK - 750,000 (37BB)

  PARK SECOND / US
  CURRENT STACK - 920,000 (46BB)
  ```

**[01:00]** 편집팀 VIRTUAL 시트 확인 → `12:20` 행에 모든 정보 완료 → 영상 편집 시작

**[01:10]** 편집팀 디렉터가 VIRTUAL 시트 접속 → "OK, 하이라이트 확정!"

**결과**: 후반 작업자가 중요 핸드만 선별 전송 → 편집팀이 노이즈 없이 즉시 확인

### 시나리오 4: 키 플레이어 테이블 이동 추적 (18:00)

**[00:00]** 대회 진행 요원이 알림: "김프로 T15 → T28 이동"
**[00:05]** HandLogger Type 시트 접속
**[00:10]** 김프로 행 찾기 → Table No. "T15" → "T28" 수정
**[00:15]** 현재 칩 확인 (딜러에게 물어봄): 520k (250k → 520k 증가)
**[00:18]** Chips 컬럼 "250000" → "520000" 수정
**[00:20]** T28 좌석 배치 확인 후 Seat No. "3" → "5" 수정 (새 좌석)
**[00:25]** "저장" → 즉시 반영, 다음 핸드 기록 시 T28 기준으로 동작

**결과**: 25초 만에 플레이어 위치/칩 업데이트 완료 (종이 메모 → 디지털 추적)

### 시나리오 5: 후반 작업자 일괄 선별 및 편집팀 즉시 작업 (21:50, Day 2 종료)

**[00:00]** Day 2 종료, Henry가 대회장 철수 시작

**[00:05]** Aiden이 프로덕션 룸에서 HandLogger Review 모드 확인 → 오늘 총 62개 핸드 기록됨

**[00:10]** Aiden이 팟 크기 내림차순 정렬 → 빅팟 TOP 30개 선별

**[00:15]** Aiden이 30개 핸드 일괄 선택 → "VIRTUAL 일괄 전송" 버튼 클릭

**[00:20]** VIRTUAL 시트에 30개 핸드 자동 갱신 완료:
- F열(파일명): "VT15_KimPro_AsKs_vs_ParkSecond_QdQc" 자동 생성
- H열(히스토리): "김프로(AsKs) vs 박세컨드(QdQc) | 보드: As Kh Qd 7c 2d | 팟: 500,000"
- E열(상태): "미완료" (편집팀이 작업 후 "완료" 변경)

**[00:25]** (Slack 알림은 별도 앱에서 자동 전송됨)

**[00:30]** 편집팀 리더가 VIRTUAL 시트 접속 → "30개 딱 정리되어 있어서 바로 작업 시작!"

**[00:35]** Aiden 퇴근, Henry도 퇴근 (추가 정리 작업 0분)

**결과**: 편집팀 대기 시간 2시간 → 0분, 후반 작업자가 큐레이션 완료 (편집팀 노이즈 제거)

### 시나리오 6: 다음 대회 재사용 (7일 후, Day 1)

**[00:00]** 새 대회 시작 (다른 장소, 다른 플레이어)
**[00:05]** HandLogger 접속 → Type 시트 열기
**[00:10]** 기존 데이터 전체 삭제 (지난 대회 키 플레이어 18명)
**[00:40]** 신규 키 플레이어 20명 입력 (이번엔 칩 리더 15명 + 유명 프로 5명)
**[00:45]** 첫 핸드 기록 시작 → "아 익숙해서 25초면 끝남"

**결과**: 학습 곡선 0, 대회마다 재사용 가능

---

## ✅ 성공 기준

### 정량적 지표 (측정 가능)

- [ ] **핸드당 기록 시간** ≤ 60초 (현재: 5분 엑셀 작업 → 목표: 1분 이내)
- [ ] **후반 작업자 핸드 선별 시간** ≤ 10초/건 (Review 모드에서 핸드 확인 → VIRTUAL 전송)
- [ ] **키 플레이어 위치 업데이트** ≤ 30초 (현재: 종이 메모 30분 지연 → 목표: 즉시)
- [ ] **VIRTUAL 시트 전송 성공률** ≥ 99% (에러 < 1%)
- [ ] **편집팀 전달 데이터 정확도** ≥ 95% (후반 작업자가 선별한 핸드만 전송)
- [ ] **대회당 사용 빈도** ≥ 1회/주 (프리랜서 매니저 기준, 주 1~2회 대회)

### 정성적 지표 (업무 효율)

- [ ] 현장 데이터 매니저가 "종이 메모 + 엑셀 수작업" 완전 대체
- [ ] 후반 작업자가 큐레이션 완료 (편집팀 노이즈 제거, 빅팟만 선별)
- [ ] 편집팀 전달 시간 2시간 → 0분 (후반 작업자가 실시간 선별 전송)
- [ ] 대회 종료 후 추가 정리 작업 0분 (현재: 1~2시간)
- [ ] 편집팀 만족도 "데이터 정확도 + 큐레이션" 평가 상승 (현재: 3/5 → 목표: 5/5)

### 사용자 행동 목표

- [ ] 신규 데이터 매니저 온보딩 ≤ 10분 (대회장 현장 실습 1회면 충분)
- [ ] 에러 발생 시 자가 해결율 ≥ 70% (명확한 에러 메시지 + Type 시트 백업)
- [ ] 3개월 후 재사용율 ≥ 90% (대회마다 계속 사용)
- [ ] 타 프로덕션 팀 추천율 ≥ 50% (입소문 확산)

---

## 🎨 최종 앱 모습

### Record 모드 (핸드 기록 화면)
```
┌─────────────────────────────────┐
│ 🃏 HandLogger v2.3     [Review] │ ← 상단 헤더
├─────────────────────────────────┤
│ 테이블: [T01 ▼]  BTN: [●3]      │ ← 설정 영역
│ Street: FLOP      Pot: 20,000   │
├─────────────────────────────────┤
│ Board:                          │
│ [Kh][10d][7c][  ][  ]          │ ← 보드 카드 (터치 선택)
├─────────────────────────────────┤
│ Turn: S4 (Alice)  ← 현재 턴    │
│                                 │
│ [CHECK] [CALL]  [BET] [RAISE]  │ ← 액션 버튼 (2열)
│ [FOLD]  [ALLIN]                │
├─────────────────────────────────┤
│ Seat Grid:                      │
│ S1:김A(✓) S2:이B(✓) S3:박C(BTN)│
│ S4:최D(→) S5:정E(✓) S6:강F(X) │ ← 좌석 상태
│                                 │
│ Stacks: S1[48k] S2[45k] ...    │ ← 스택 (옵션)
├─────────────────────────────────┤
│        [Next Street]            │ ← 스트릿 이동
│        [Commit Hand]            │ ← 저장
└─────────────────────────────────┘
```

### Review 모드 (핸드 조회 화면)
```
┌─────────────────────────────────┐
│ 🔍 Hand History        [Record] │
├──────────────┬──────────────────┤
│ List (L)     │ Detail (R)       │
│              │                  │
│ #50 T01 18:03│ Hand #50         │
│ → Pot 125k   │ Board: Kh10d7c2sAc
│              │                  │
│ #49 T01 17:58│ Players:         │
│   Pot 80k    │ S2(Alice) AsKs   │
│              │ S5(Bob)   QdQc   │
│ #48 T01 17:52│                  │
│   Pot 60k    │ Actions:         │
│              │ PREFLOP          │
│ #47 T01 17:47│ S4 BET 2000      │
│   Pot 95k    │ S5 RAISE 5000    │
│              │ ...              │
│ ⬇️ Scroll... │                  │
└──────────────┴──────────────────┘
```

### 모바일 최적화
- 카드 선택: 큰 터치 영역 (최소 44x44px)
- 액션 버튼: 색상 코딩 (CHECK/CALL=녹색, BET/RAISE=빨강, FOLD=회색, ALLIN=진빨강)
- 스크롤: 무한 스크롤 (50개씩 로드)
- 오프라인: 로컬 저장 후 온라인 시 자동 동기화 (향후)

---

## 🔗 관련 문서

- [PRD_HandLogger.md](PRD_HandLogger.md) - Phase별 작업 목록
- [LLD_HandLogger.md](LLD_HandLogger.md) - 기술 설계 인덱스
- [STATUS.md](STATUS.md) - 현재 진행 상태
- [CHANGELOG.md](CHANGELOG.md) - 버전별 변경 이력
